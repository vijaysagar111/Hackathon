<!DOCTYPE html>
<html>

<head>
  <style>
    * {
      max-width: 500px;
      margin: auto;

      padding: 10px;
    }

    input {
      width: 300px;
      height: 50px;
      border-radius: 10px;
      border: 1px;
      text-align: center;
    }

    button {
      width: 80px;
      padding: 10px;
      background-color: lightgreen;
      margin-left: 110px;
      margin-top: 30px;
    }

    #is_game {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

  
      
  </style>

</head>

<body>
  <div>
    <h1 style="font-family: Verdana, Geneva, Tahoma, sans-serif;">Crack the CODE</h1>
    <div>
      <input type="number" name="user_input" id="i_p" placeholder="Guess Code">
      <br>
      <button id="submit">Submit</button>
    </div>
    <div>
      <p id="o_p"></p>
      <p id="code"></p>
      <p id="is_game">Keep guessing</p>
    </div>
    <div>
      <p></p>
      <ul id="step" style="list-style: none;">
        <li>
          <b>Result</b>
          
        </li>
      </ul>
    </div>
    <div>
     Note:<br>
     'Y' Indicates a number is in the correct position.
      <br>'E' Indicates a number is part of the code, but not in the right position.
      <br>'E' Doesn't consider how many times a number exists in the code.
    <br>'X' Indicates a number is not part of the code.
    </div>

</div>

    <script>
      var secret_code = generateCode();
      var step_counter = 0;
      document.getElementById("submit").addEventListener("click", getInput);


      function getInput() {
        var x = document.getElementById('i_p').value;

        processInput(x);
      }

      function processInput(input) {
        var n = input.length;
        if (document.getElementById("submit").innerHTML === "Reset") {
          cleanAll();
          return;
        }
        else if (n > 4) {
          o_p.innerHTML = "Input exceeds 4 character!";
          return;
        }
        else if (n < 4) {
          o_p.innerHTML = "Input is less than 4 character!";
          return;
        }
        else if (step_counter === 5) {
          document.getElementById("is_game").innerHTML = "You lose!! ";
          resetGame();
          return;
        }
        else {
          step_counter++;
          checkSubmission(input);
          return;
        }

        return;
      }

      function generateCode() {
        var code = "";
        for (var i = 0; i < 4; i++) {
          var n = getRandom(0, 9);
          code += n.toString();
        }
        return code;
      }

      function getRandom(min, max) {
        
        var random = Math.floor(Math.random() * (max - min + 1)) + min;
        console.log(random);
        return random;
      }

      function checkSubmission(usr_input) {
        
        if (usr_input === secret_code) {
          document.getElementById("is_game").innerHTML = "Cool! You Win!";
          resetGame();
        }
        var result = "";

        for (var i = 0; i < 4; i++) {
          var found = false;
          if (usr_input[i] === secret_code[i]) {
            
           v1 = usr_input[i];
           
        
            result += "Y ";
            
            found = true;
            continue;
          }
          for (var j = 0; j < 4; j++) {
            if (usr_input[i] === secret_code[j]) {
              result += "E "
              found = true;
              break;
            }
          }
          if (!found) {
            result += "X ";
          }
        }
        //document.getElementById("check").innerHTML = result;
        showSubmission(result, usr_input);
        return;
      }
      function showSubmission(result, usr_input) {
        
        var ul = document.getElementById("step");
        var li = document.createElement("li");

        
        ul.appendChild(li);
        li.innerHTML = result;
      }

      function resetGame() {
        document.getElementById("submit").innerHTML = "Reset";
      }

      function cleanAll() {
        secret_code = generateCode();
        step_counter = 0;
        document.getElementById("o_p").innerHTML = "";
        document.getElementById("is_game").innerHTML = "Keep Guessing!!";
        document.getElementById("step").innerHTML = "<li><b>Result</b></li>";
        document.getElementById("submit").innerHTML = "Submit";
        
        return;
      }

    </script>
  
</body>

</html>